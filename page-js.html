<script>
  let table;

  const csvToJson = (csvData) => {
    const headers = csvData.shift();
    return csvData.map((row) => {
      let jsonRow = {};
      row.forEach((value, index) => {
          jsonRow[headers[index]] = value;
      });
      return jsonRow;
    });
  }

  const setTableData = (data) => {
    if (table) {
      table.setData(data);
    }
  }

  const onLoad = () => {
    table = new Tabulator("#import-table", {
      autoColumns: true,
      // layout: "fitColumns",
      autoColumnsDefinitions: (definitions) => {
        definitions.forEach(definition => definition['headerSort'] = false)
        return definitions;
      }
    });
  };

  window.addEventListener("load", onLoad);
</script>
